{"ast":null,"code":"import _objectSpread from \"/home/ubuntu/projects/mynetwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/ubuntu/projects/mynetwork/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/ubuntu/projects/mynetwork/src/features/report/ReportForm.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect, useState } from 'react';\nimport { Field, Form } from 'react-final-form';\nimport { Button, Card, CardBody, CardFooter, CardHeader, Col, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText, Row } from \"reactstrap\";\nimport moment from 'moment';\nimport { useMutation, useQuery } from 'react-query';\nimport { createReport, getReportByGq, updateReport } from './query';\n\nvar ReportForm = function ReportForm(_ref) {\n  var user = _ref.user;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      report = _useState2[0],\n      setreport = _useState2[1];\n\n  var reportdata = useQuery([\"report\", {\n    date: moment().format(\"YYYY-MM-DD\"),\n    id: user.command.id\n  }], getReportByGq);\n\n  var _useMutation = useMutation(createReport, {\n    onSuccess: function onSuccess() {\n      reportdata.refetch();\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      repMut = _useMutation2[0],\n      repMutRes = _useMutation2[1];\n\n  var _useMutation3 = useMutation(updateReport, {\n    onSuccess: function onSuccess() {\n      reportdata.refetch();\n    }\n  }),\n      _useMutation4 = _slicedToArray(_useMutation3, 2),\n      repMutUpdate = _useMutation4[0],\n      repMutUpdateRes = _useMutation4[1];\n\n  useEffect(function () {\n    if (reportdata.data && reportdata.data.reports != null) {\n      setreport(reportdata.data.reports[0]);\n    } else {\n      setreport({});\n    }\n  }, [reportdata.data]);\n\n  var onSubmit = function onSubmit(data) {\n    var temp = _objectSpread({}, data);\n\n    temp.date = moment().format(\"YYYY-MM-DD\"); // temp.user = user.id\n\n    temp.command = user.command.id; // temp.file = 1\n\n    if (report == null) repMut(temp);else repMutUpdate(temp); // console.log(repMutRes);\n    // repMutRes.onSuccess(repdata.refetch())\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, \"\\u0417\\u0430\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B\\u044F \\u0434\\u043B\\u044F \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043A\\u0438 \\u0440\\u0430\\u0441\\u0445\\u043E\\u0434\\u0430\"), /*#__PURE__*/React.createElement(CardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit // validate={validate}\n    ,\n    initialValues: _objectSpread({}, report),\n    render: function render(_ref2) {\n      var handleSubmit = _ref2.handleSubmit,\n          submitError = _ref2.submitError,\n          values = _ref2.values;\n      return /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"form\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 25\n        }\n      }, submitError && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-red text-center\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 45\n        }\n      }, submitError), /*#__PURE__*/React.createElement(Row, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-3\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"dej\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 45\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Input, {\n          placeholder: \"\\u0414\\u0435\\u0436\\u0443\\u0440\\u043D\\u044B\\u0439 \\u043F\\u043E \\u0412/\\u0427\",\n          type: \"text\",\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 53\n          }\n        });\n      }))), /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-3\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"dej_pom\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 45\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Input, {\n          placeholder: \"\\u041F\\u043E\\u043C\\u043E\\u0449\\u043D\\u0438\\u043A \\u0434\\u0435\\u0436\\u0443\\u0440\\u043D\\u043E\\u0433\\u043E \\u043F\\u043E \\u0412/\\u0427\",\n          type: \"text\",\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 53\n          }\n        });\n      }))), /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-3\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"royxat_boyicha\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 45\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Input, {\n          placeholder: \"\\u041F\\u043E \\u0441\\u043F\\u0438\\u0441\\u043A\\u0443\",\n          type: \"number\",\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 53\n          }\n        });\n      }))), /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-3\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"safda\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 45\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Input, {\n          placeholder: \"\\u041D\\u0430 \\u043B\\u0438\\u0446\\u043E\",\n          type: \"number\",\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 53\n          }\n        });\n      })))), /*#__PURE__*/React.createElement(Col, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-3\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"safar\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 45\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Input, {\n          placeholder: \"\\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430\",\n          type: \"number\",\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 53\n          }\n        });\n      }))), /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-3\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"tatil\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 45\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Input, {\n          placeholder: \"\\u041E\\u0442\\u043F\\u0443\\u0441\\u043A\",\n          type: \"number\",\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 53\n          }\n        });\n      }))), /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-3\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"gospital\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 45\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Input, {\n          placeholder: \"\\u0413\\u043E\\u0441\\u043F\\u0438\\u0442\\u0430\\u043B\\u044C\",\n          type: \"number\",\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 53\n          }\n        });\n      }))), /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-3\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"uy_karantin\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 45\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Input, {\n          placeholder: \"\\u0414\\u043E\\u043C\\u0430\\u0448\\u043D\\u0438\\u0439 \\u043A\\u0430\\u0440\\u0430\\u043D\\u0442\\u0438\\u043D\",\n          type: \"number\",\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 53\n          }\n        });\n      }))))), /*#__PURE__*/React.createElement(Row, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        className: \"justify-content-end d-flex\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"info\",\n        className: \"rounded-0 shadow-none border-0\",\n        onClick: function onClick(e) {\n          e.preventDefault();\n          handleSubmit(values);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 45\n        }\n      }, report == null ? \"Загрузить расход\" : \"Обновить\"), /*#__PURE__*/React.createElement(InputGroupAddon, {\n        addonType: \"append\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(InputGroupText, {\n        className: \"bg-info text-white shadow-none border-0\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 49\n        }\n      }, repMutRes.status === 'loading' || repMutUpdateRes.status === 'loading' ? /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-spinner spin \",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 129\n        }\n      }) : repMutRes.status === 'success' || repMutUpdateRes.status === 'success' ? /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-check\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 132\n        }\n      }) : repMutRes.status === 'error' || repMutUpdateRes.status === 'error' ? /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-times\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 132\n        }\n      }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-paper-plane\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 166\n        }\n      })))))))));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(CardFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }\n  }));\n};\n\n__signature__(ReportForm, \"useState{[report, setreport]({})}\\nuseQuery{reportdata}\\nuseMutation{[repMut, repMutRes]}\\nuseMutation{[repMutUpdate, repMutUpdateRes]}\\nuseEffect{}\", function () {\n  return [useQuery, useMutation, useMutation];\n});\n\nvar _default = ReportForm;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(ReportForm, \"ReportForm\", \"/home/ubuntu/projects/mynetwork/src/features/report/ReportForm.js\");\n  reactHotLoader.register(_default, \"default\", \"/home/ubuntu/projects/mynetwork/src/features/report/ReportForm.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/ubuntu/projects/mynetwork/src/features/report/ReportForm.js"],"names":["React","useEffect","useState","Field","Form","Button","Card","CardBody","CardFooter","CardHeader","Col","FormGroup","Input","InputGroup","InputGroupAddon","InputGroupText","Row","moment","useMutation","useQuery","createReport","getReportByGq","updateReport","ReportForm","user","report","setreport","reportdata","date","format","id","command","onSuccess","refetch","repMut","repMutRes","repMutUpdate","repMutUpdateRes","data","reports","onSubmit","temp","handleSubmit","submitError","values","props","input","name","value","onChange","e","preventDefault","status"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Field, Form } from 'react-final-form';\nimport { Button, Card, CardBody, CardFooter, CardHeader, Col, FormGroup, Input, InputGroup, InputGroupAddon, InputGroupText, Row } from \"reactstrap\";\nimport moment from 'moment'\nimport { useMutation, useQuery } from 'react-query';\nimport { createReport, getReportByGq, updateReport } from './query';\n\n\nconst ReportForm = ({ user }) => {\n\n    const [report, setreport] = useState({})\n\n    const reportdata = useQuery([\"report\", { date: moment().format(\"YYYY-MM-DD\"), id: user.command.id }], getReportByGq)\n\n    const [repMut, repMutRes] = useMutation(createReport, {\n        onSuccess: () => {\n            reportdata.refetch()        \n        }\n    })\n\n    const [repMutUpdate, repMutUpdateRes] = useMutation(updateReport, {\n        onSuccess: () => {\n            reportdata.refetch()\n        }\n    })\n\n    useEffect(() => {\n        if (reportdata.data && reportdata.data.reports != null) {\n            setreport(reportdata.data.reports[0])\n        } else {\n            setreport({})\n        }\n    }, [reportdata.data]);\n\n    const onSubmit = (data) => {\n        let temp = { ...data }\n        temp.date = moment().format(\"YYYY-MM-DD\")\n        // temp.user = user.id\n        temp.command = user.command.id\n        // temp.file = 1\n\n        if (report == null) repMut(temp); else repMutUpdate(temp)\n        // console.log(repMutRes);\n        // repMutRes.onSuccess(repdata.refetch())\n    }\n    return (\n        <Card>\n            <CardHeader>Заполните поля для отправки расхода</CardHeader>\n            <CardBody>\n                <Form\n                    onSubmit={onSubmit}\n                    // validate={validate}\n                    initialValues={{\n                        // name: \"\",\n                        // repcat: \"\"\n                        // command: user.command.name\n                        ...report\n                    }}\n                    render={({ handleSubmit, submitError, values }) => (\n                        <form onSubmit={handleSubmit} className=\"form\">\n                            {submitError && <div className=\"text-red text-center\">{submitError}</div>}\n\n                            {/* <FormGroup className=\"mb-3\">\n                                    <InputGroup className=\"input-group-alternative\">\n                                        <Field name=\"command\">\n                                            {props => (\n                                                <Input placeholder=\"Подразделение\" type=\"text\" disabled\n                                                    name={props.input.name}\n                                                    value={props.input.value}\n                                                    onChange={props.input.onChange}\n                                                />\n                                            )}\n                                        </Field>\n                                    </InputGroup>\n                                </FormGroup> */}\n                            <Row>\n                                <Col>\n                                    <FormGroup className=\"mb-3\">\n                                        <InputGroup className=\"input-group-alternative\">\n                                            <Field name=\"dej\">\n                                                {props => (\n                                                    <Input placeholder=\"Дежурный по В/Ч\" type=\"text\"\n                                                        name={props.input.name}\n                                                        value={props.input.value}\n                                                        onChange={props.input.onChange}\n                                                    />\n                                                )}\n                                            </Field>\n                                        </InputGroup>\n                                    </FormGroup>\n\n                                    <FormGroup className=\"mb-3\">\n                                        <InputGroup className=\"input-group-alternative\">\n                                            <Field name=\"dej_pom\">\n                                                {props => (\n                                                    <Input placeholder=\"Помощник дежурного по В/Ч\" type=\"text\"\n                                                        name={props.input.name}\n                                                        value={props.input.value}\n                                                        onChange={props.input.onChange}\n                                                    />\n                                                )}\n                                            </Field>\n                                        </InputGroup>\n                                    </FormGroup>\n\n                                    <FormGroup className=\"mb-3\">\n                                        <InputGroup className=\"input-group-alternative\">\n                                            <Field name=\"royxat_boyicha\">\n                                                {props => (\n                                                    <Input placeholder=\"По списку\" type=\"number\"\n                                                        name={props.input.name}\n                                                        value={props.input.value}\n                                                        onChange={props.input.onChange}\n                                                    />\n                                                )}\n                                            </Field>\n                                        </InputGroup>\n                                    </FormGroup>\n\n                                    <FormGroup className=\"mb-3\">\n                                        <InputGroup className=\"input-group-alternative\">\n                                            <Field name=\"safda\">\n                                                {props => (\n                                                    <Input placeholder=\"На лицо\" type=\"number\"\n                                                        name={props.input.name}\n                                                        value={props.input.value}\n                                                        onChange={props.input.onChange}\n                                                    />\n                                                )}\n                                            </Field>\n                                        </InputGroup>\n                                    </FormGroup>\n                                </Col>\n                                <Col>\n                                    <FormGroup className=\"mb-3\">\n                                        <InputGroup className=\"input-group-alternative\">\n                                            <Field name=\"safar\">\n                                                {props => (\n                                                    <Input placeholder=\"Командировка\" type=\"number\"\n                                                        name={props.input.name}\n                                                        value={props.input.value}\n                                                        onChange={props.input.onChange}\n                                                    />\n                                                )}\n                                            </Field>\n                                        </InputGroup>\n                                    </FormGroup>\n\n                                    <FormGroup className=\"mb-3\">\n                                        <InputGroup className=\"input-group-alternative\">\n                                            <Field name=\"tatil\">\n                                                {props => (\n                                                    <Input placeholder=\"Отпуск\" type=\"number\"\n                                                        name={props.input.name}\n                                                        value={props.input.value}\n                                                        onChange={props.input.onChange}\n                                                    />\n                                                )}\n                                            </Field>\n                                        </InputGroup>\n                                    </FormGroup>\n\n                                    <FormGroup className=\"mb-3\">\n                                        <InputGroup className=\"input-group-alternative\">\n                                            <Field name=\"gospital\">\n                                                {props => (\n                                                    <Input placeholder=\"Госпиталь\" type=\"number\"\n                                                        name={props.input.name}\n                                                        value={props.input.value}\n                                                        onChange={props.input.onChange}\n                                                    />\n                                                )}\n                                            </Field>\n                                        </InputGroup>\n                                    </FormGroup>\n\n                                    <FormGroup className=\"mb-3\">\n                                        <InputGroup className=\"input-group-alternative\">\n                                            <Field name=\"uy_karantin\">\n                                                {props => (\n                                                    <Input placeholder=\"Домашний карантин\" type=\"number\"\n                                                        name={props.input.name}\n                                                        value={props.input.value}\n                                                        onChange={props.input.onChange}\n                                                    />\n                                                )}\n                                            </Field>\n                                        </InputGroup>\n                                    </FormGroup>\n                                </Col>\n                            </Row>\n\n                            {/* <FormGroup>\n                                    <InputGroup>\n                                        <Field name=\"repcat\">\n                                            {props => (\n                                                <Input type=\"select\"\n                                                    name={props.input.name}\n                                                    value={props.input.value}\n                                                    onChange={props.input.onChange}\n                                                >\n                                                    <option>Выберите категорию</option>\n                                                    {repcat.map((item) => {\n                                                        return (\n                                                            <option value={item.id}>{item.name}</option>\n                                                        )\n                                                    })}\n                                                </Input>\n                                            )}\n                                        </Field>\n                                    </InputGroup>\n                                </FormGroup> */}\n                            {/* <FormGroup>\n                                    <InputGroup>\n                                        <Field name=\"file\">\n                                            {props =    \n                                                <>\n                                                    <div class=\"custom-file\">\n                                                        <Input type=\"file\"\n                                                            class=\"custom-file-input\" id=\"inputGroupFile01\"\n                                                            name={props.input.name}\n                                                            value={props.input.value}\n                                                            onChange={props.input.onChange}\n                                                        />\n                                                        <label class=\"custom-file-label\" for=\"inputGroupFile01\">Выбрать файл</label>\n                                                    </div>\n                                                </>\n                                            )}\n                                        </Field>\n                                    </InputGroup>\n                                </FormGroup> */}\n                            <Row>\n                                <Col className=\"justify-content-end d-flex\">\n                                    <FormGroup>\n                                        <InputGroup>\n                                            <Button\n                                                color=\"info\"\n                                                className=\"rounded-0 shadow-none border-0\"\n                                                onClick={e => {\n                                                    e.preventDefault()\n                                                    handleSubmit(values)\n                                                }}\n                                            >{(report == null) ? \"Загрузить расход\" : \"Обновить\"}</Button>\n                                            <InputGroupAddon addonType=\"append\">\n                                                <InputGroupText className=\"bg-info text-white shadow-none border-0\">\n                                                    {(repMutRes.status === 'loading' || repMutUpdateRes.status === 'loading') ? <i className=\"fa fa-spinner spin \" /> :\n                                                        (repMutRes.status === 'success' || repMutUpdateRes.status === 'success') ? <i className=\"fa fa-check\" /> :\n                                                            (repMutRes.status === 'error' || repMutUpdateRes.status === 'error') ? <i className=\"fa fa-times\" /> : <><i className=\"fa fa-paper-plane\" /></>}\n                                                </InputGroupText>\n                                            </InputGroupAddon>\n                                        </InputGroup>\n                                    </FormGroup>\n                                </Col>\n                            </Row>\n\n                        </form>)}\n                />\n            </CardBody>\n            <CardFooter>\n\n            </CardFooter>\n        </Card>\n    );\n}\n\nexport default ReportForm;"]},"metadata":{},"sourceType":"module"}