{"ast":null,"code":"import _regeneratorRuntime from \"/home/farrux/java/bot_admin_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/home/farrux/java/bot_admin_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/home/farrux/java/bot_admin_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/farrux/java/bot_admin_dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/farrux/java/bot_admin_dashboard/src/features/auth/Login.js\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nimport React, { useEffect } from 'react'; // import PropTypes from 'prop-types';\n\nimport { Form, Field } from 'react-final-form';\nimport { useMutation } from 'react-query';\nimport { loginAction } from './query'; // reactstrap components\n\nimport { Button, Card, CardHeader, CardBody, FormGroup // Form,\n, Input, InputGroupAddon, InputGroupText, InputGroup, Row, Col } from \"reactstrap\";\nimport { withRouter } from \"react-router-dom\"; // import { isValidEmail } from \"../../extrafunc\";\n\nimport { FORM_ERROR } from \"final-form\";\n\nvar _default = withRouter(__signature__(function Login(_ref) {\n  var _this = this;\n\n  var history = _ref.history;\n  useEffect(function () {\n    document.title = 'Network - Signin';\n    localStorage.removeItem('jwt');\n    localStorage.removeItem('user');\n  }, []);\n\n  var _useMutation = useMutation(loginAction),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      loginMut = _useMutation2[0],\n      login = _useMutation2[1];\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return loginMut(data);\n\n            case 2:\n              res = _context.sent;\n\n              if (res) {\n                if (!window.location.origin.includes('localhost')) {// await notifyMut();\n                }\n\n                history.push('/admin');\n              }\n\n              if (res) {\n                _context.next = 9;\n                break;\n              }\n\n              console.log(res, \"flag\");\n              return _context.abrupt(\"return\", _defineProperty({}, FORM_ERROR, 'Невалидные данные аккаунта!'));\n\n            case 9:\n              if (data.remember) {\n                localStorage.setItem('remember_me', JSON.stringify(data.remember));\n              } else {\n                localStorage.removeItem('remember_me');\n              }\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var validate = function validate(val) {\n    var err = {};\n\n    if (!val.email) {\n      err.email = 'Required';\n    } // if (!isValidEmail(val.email)) { err.email = 'Invalid e-mail address' }\n\n\n    if (!val.password) {\n      err.password = 'Required';\n    }\n\n    return err;\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Col, {\n    lg: \"5\",\n    md: \"7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"bg-secondary shadow border-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    className: \"px-lg-5 py-lg-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center text-muted mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\")), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    validate: validate,\n    initialValues: {// email: \"asd@asd.ads\",\n      // password: \"ads\",\n    },\n    render: function render(_ref4) {\n      var handleSubmit = _ref4.handleSubmit,\n          submitError = _ref4.submitError,\n          values = _ref4.values;\n      return /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"form\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 17\n        }\n      }, submitError && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-red text-center\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 35\n        }\n      }, submitError), /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-3\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(InputGroupAddon, {\n        addonType: \"prepend\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(InputGroupText, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"ni ni-email-83\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 27\n        }\n      }))), /*#__PURE__*/React.createElement(Field, {\n        name: \"email\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 23\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Input, {\n          placeholder: \"\\u041F\\u043E\\u0447\\u0442\\u0430\",\n          type: \"email\",\n          autoComplete: \"new-email\",\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 27\n          }\n        });\n      }))), /*#__PURE__*/React.createElement(FormGroup, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        className: \"input-group-alternative\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(InputGroupAddon, {\n        addonType: \"prepend\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(InputGroupText, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"ni ni-lock-circle-open\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 27\n        }\n      }))), /*#__PURE__*/React.createElement(Field, {\n        name: \"password\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 23\n        }\n      }, function (props) {\n        return /*#__PURE__*/React.createElement(Input, {\n          placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n          type: \"password\",\n          autoComplete: \"new-password\",\n          name: props.input.name,\n          value: props.input.value,\n          onChange: props.input.onChange,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 27\n          }\n        });\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-control custom-control-alternative custom-checkbox\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Field, {\n        name: \"remember\",\n        type: \"checkbox\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }\n      }, function (props) {\n        var _React$createElement;\n\n        return /*#__PURE__*/React.createElement(\"input\", (_React$createElement = {\n          onChange: props.input.onChange,\n          className: \"custom-control-input\",\n          id: \" customCheckLogin\",\n          type: \"checkbox\",\n          name: props.input.name,\n          value: props.input.value\n        }, _defineProperty(_React$createElement, \"onChange\", props.input.onChange), _defineProperty(_React$createElement, \"__self\", _this), _defineProperty(_React$createElement, \"__source\", {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 25\n        }), _React$createElement));\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"custom-control-label\",\n        htmlFor: \" customCheckLogin\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text-muted\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 23\n        }\n      }, \"\\u0417\\u0430\\u043F\\u043E\\u043C\\u043D\\u0438\\u0442\\u044C\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: \"my-4\",\n        color: \"primary\",\n        type: \"button\",\n        onClick: function onClick() {\n          return handleSubmit(values);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }\n      }, \"\\u0412\\u0445\\u043E\\u0434\")));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  })))));\n}, \"useEffect{}\\nuseMutation{[loginMut, login]}\", function () {\n  return [useMutation];\n}));\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_default, \"default\", \"/home/farrux/java/bot_admin_dashboard/src/features/auth/Login.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/farrux/java/bot_admin_dashboard/src/features/auth/Login.js"],"names":["React","useEffect","Form","Field","useMutation","loginAction","Button","Card","CardHeader","CardBody","FormGroup","Input","InputGroupAddon","InputGroupText","InputGroup","Row","Col","withRouter","FORM_ERROR","Login","history","document","title","localStorage","removeItem","loginMut","login","onSubmit","data","res","window","location","origin","includes","push","console","log","remember","setItem","JSON","stringify","validate","val","err","email","password","handleSubmit","submitError","values","props","input","name","value","onChange"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\n// import PropTypes from 'prop-types';\nimport { Form, Field } from 'react-final-form'\n\nimport { useMutation } from 'react-query';\nimport { loginAction } from './query';\n\n// reactstrap components\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  FormGroup,\n  // Form,\n  Input,\n  InputGroupAddon,\n  InputGroupText,\n  InputGroup,\n  Row,\n  Col\n} from \"reactstrap\";\nimport { withRouter } from \"react-router-dom\";\n// import { isValidEmail } from \"../../extrafunc\";\nimport { FORM_ERROR } from \"final-form\";\n\nexport default withRouter(function Login({ history }) {\n  useEffect(() => {\n    document.title = 'Network - Signin';\n    localStorage.removeItem('jwt')\n    localStorage.removeItem('user')\n  }, [])\n\n  const [loginMut, login] = useMutation(loginAction);\n\n  const onSubmit = async (data) => {\n    const res = await loginMut(data);\n    if (res) {\n      if (!window.location.origin.includes('localhost')) {\n        // await notifyMut();\n      }\n      history.push('/admin');\n    }\n    if (!res) {\n      console.log(res, \"flag\")\n      return {\n        [FORM_ERROR]: 'Невалидные данные аккаунта!'\n      }\n    } else if (data.remember) {\n      localStorage.setItem('remember_me', JSON.stringify(data.remember));\n    } else { localStorage.removeItem('remember_me') }\n  }\n\n  const validate = (val) => {\n    const err = {}\n    if (!val.email) { err.email = 'Required' }\n    // if (!isValidEmail(val.email)) { err.email = 'Invalid e-mail address' }\n    if (!val.password) { err.password = 'Required' }\n    return err\n  }\n\n  return (\n    <>\n      <Col lg=\"5\" md=\"7\">\n        <Card className=\"bg-secondary shadow border-0\">\n          <CardBody className=\"px-lg-5 py-lg-5\">\n            <div className=\"text-center text-muted mb-4\">\n              <small>Введите данные аккаунта</small>\n            </div>\n            <Form\n              onSubmit={onSubmit}\n              validate={validate}\n              initialValues={{\n                // email: \"asd@asd.ads\",\n                // password: \"ads\",\n              }}\n              render={({ handleSubmit, submitError, values }) => (\n                <form onSubmit={handleSubmit} className=\"form\">\n                  {submitError && <div className=\"text-red text-center\">{submitError}</div>}\n                  <FormGroup className=\"mb-3\">\n                    <InputGroup className=\"input-group-alternative\">\n                      <InputGroupAddon addonType=\"prepend\">\n                        <InputGroupText>\n                          <i className=\"ni ni-email-83\" />\n                        </InputGroupText>\n                      </InputGroupAddon>\n                      <Field name=\"email\">\n                        {props => (\n                          <Input placeholder=\"Почта\" type=\"email\" autoComplete=\"new-email\"\n                            name={props.input.name}\n                            value={props.input.value}\n                            onChange={props.input.onChange}\n                          />\n                        )}\n                      </Field>\n                    </InputGroup>\n                  </FormGroup>\n                  <FormGroup>\n                    <InputGroup className=\"input-group-alternative\">\n                      <InputGroupAddon addonType=\"prepend\">\n                        <InputGroupText>\n                          <i className=\"ni ni-lock-circle-open\" />\n                        </InputGroupText>\n                      </InputGroupAddon>\n                      <Field name=\"password\">\n                        {props => (\n                          <Input placeholder=\"Пароль\" type=\"password\" autoComplete=\"new-password\"\n                            name={props.input.name}\n                            value={props.input.value}\n                            onChange={props.input.onChange}\n                          />\n                        )}\n                      </Field>\n                    </InputGroup>\n                  </FormGroup>\n                  <div className=\"custom-control custom-control-alternative custom-checkbox\">\n                    <Field name=\"remember\" type=\"checkbox\">\n                      {props => (\n                        <input\n                          onChange={props.input.onChange}\n                          className=\"custom-control-input\"\n                          id=\" customCheckLogin\"\n                          type=\"checkbox\"\n                          name={props.input.name}\n                          value={props.input.value}\n                          onChange={props.input.onChange}\n                        />)}\n                    </Field>\n                    <label\n                      className=\"custom-control-label\"\n                      htmlFor=\" customCheckLogin\"\n                    >\n                      <span className=\"text-muted\">Запомнить</span>\n                    </label>\n                  </div>\n                  <div className=\"text-center\">\n                    <Button className=\"my-4\" color=\"primary\" type=\"button\" onClick={() => handleSubmit(values)}>\n                      Вход\n                  </Button>\n                  </div>\n                </form>\n              )}\n            />\n          </CardBody>\n        </Card>\n      </Col>\n    </>\n  ); \n})\n\n"]},"metadata":{},"sourceType":"module"}